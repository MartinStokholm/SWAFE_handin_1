<div class="flex flex-col my-8">
  <button
    class="py-2 mb-8 bg-blue-400 hover:bg-blue-600 text-white font-semibold hover:font-bold px-8 rounded-full transition-colors duration-200 ease-in-out shadow-md"
    (click)=navigateToCards()>
    Go back
  </button>

  <form class="flex flex-col gap-4 p-8 border-2 mx-8 mt-8 max-w-[600px]" (ngSubmit)="onSubmit()"
        #creditCardForm="ngForm">
    <!-- Card Number -->
    <div class="mb-4 flex justify-between">
      <label for="cardNumber">Card Number:</label>
      <input
        type="number"
        id="cardNumber"
        name="cardNumber"
        [(ngModel)]="formData.card_number"
        required
        pattern="[0-9]+"
        minlength="7"
        maxlength="16"
        class="p-2 border rounded"
      />
      <div
        *ngIf="
        (creditCardForm.controls['card_number']?.dirty ||
          creditCardForm.controls['card_number']?.touched) &&
        creditCardForm.controls['card_number'].errors?.['required']
      "
        class="text-red-500"
      >
        Card Number is required.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['card_number']?.dirty ||
          creditCardForm.controls['card_number']?.touched) &&
        creditCardForm.controls['card_number'].errors?.['pattern']
      "
        class="text-red-500"
      >
        Card Number must contain only numbers.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['card_number']?.dirty ||
          creditCardForm.controls['card_number']?.touched) &&
        creditCardForm.controls['card_number'].errors?.['minlength']
      "
        class="text-red-500"
      >
        Card Number must be at least 7 digits long.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['card_number']?.dirty ||
          creditCardForm.controls['card_number']?.touched) &&
        creditCardForm.controls['card_number'].errors?.['maxlength']
      "
        class="text-red-500"
      >
        Card Number must not exceed 16 digits.
      </div>
    </div>

    <!-- Cardholder Name -->
    <div class="mb-4 flex justify-between">
      <label for="cardholderName">Cardholder Name:</label>
      <input
        type="text"
        id="cardholderName"
        name="cardholderName"
        [(ngModel)]="formData.cardholder_name"
        required
        class="p-2 border rounded"
      />
      <div
        *ngIf="
        (creditCardForm.controls['cardholder_name']?.dirty ||
          creditCardForm.controls['cardholder_name']?.touched) &&
        creditCardForm.controls['cardholder_name'].errors?.['required']
      "
        class="text-red-500"
      >
        Cardholder Name is required.
      </div>
    </div>

    <!-- CSC Code -->
    <div class="mb-4 flex justify-between">
      <label for="cscCode">CSC Code:</label>
      <input
        type="number"
        id="cscCode"
        name="cscCode"
        [(ngModel)]="formData.csc_code"
        required
        pattern="[0-9]+"
        minlength="3"
        maxlength="3"
        class="p-2 border rounded"
      />
      <div
        *ngIf="
        (creditCardForm.controls['csc_code']?.dirty ||
          creditCardForm.controls['csc_code']?.touched) &&
        creditCardForm.controls['csc_code'].errors?.['required']
      "
        class="text-red-500"
      >
        CSC Code is required.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['csc_code']?.dirty ||
          creditCardForm.controls['csc_code']?.touched) &&
        creditCardForm.controls['csc_code'].errors?.['pattern']
      "
        class="text-red-500"
      >
        CSC Code must contain only numbers.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['csc_code']?.dirty ||
          creditCardForm.controls['csc_code']?.touched) &&
        creditCardForm.controls['csc_code'].errors?.['minlength']
      "
        class="text-red-500"
      >
        CSC Code must be exactly 3 digits long.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['csc_code']?.dirty ||
          creditCardForm.controls['csc_code']?.touched) &&
        creditCardForm.controls['csc_code'].errors?.['maxlength']
      "
        class="text-red-500"
      >
        CSC Code must be exactly 3 digits long.
      </div>
    </div>

    <!-- Expiration Date Month -->
    <div class="mb-4 flex justify-between">
      <label for="expirationDateMonth">Expiration Date Month:</label>
      <input
        type="number"
        id="expirationDateMonth"
        name="expirationDateMonth"
        [(ngModel)]="formData.expiration_date_month"
        required
        min="1"
        max="12"
        class="p-2 border rounded"
      />
      <div
        *ngIf="
        (creditCardForm.controls['expiration_date_month']?.dirty ||
          creditCardForm.controls['expiration_date_month']?.touched) &&
        creditCardForm.controls['expiration_date_month'].errors?.['required']
      "
        class="text-red-500"
      >
        Expiration Date Month is required.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['expiration_date_month']?.dirty ||
          creditCardForm.controls['expiration_date_month']?.touched) &&
        creditCardForm.controls['expiration_date_month'].errors?.['min']
      "
        class="text-red-500"
      >
        Expiration Date Month must be at least 1.
      </div>
      <div
        *ngIf="
        (creditCardForm.controls['expiration_date_month']?.dirty ||
          creditCardForm.controls['expiration_date_month']?.touched) &&
        creditCardForm.controls['expiration_date_month'].errors?.['max']
      "
        class="text-red-500"
      >
        Expiration Date Month must be at most 12.
      </div>
    </div>

    <!-- Expiration Date Year -->
    <div class="mb-4 flex justify-between">
      <label for="expirationDateYear">Expiration Date Year:</label>
      <input
        type="number"
        id="expirationDateYear"
        name="expirationDateYear"
        [(ngModel)]="formData.expiration_date_year"
        required
        class="p-2 border rounded"
      />
      <div
        *ngIf="
        (creditCardForm.controls['expiration_date_year']?.dirty ||
          creditCardForm.controls['expiration_date_year']?.touched) &&
        creditCardForm.controls['expiration_date_year'].errors?.['required']
      "
        class="text-red-500"
      >
        Expiration Date Year is required.
      </div>
    </div>

    <!-- Issuer (optional) -->
    <div class="mb-4 flex justify-between">
      <label for="issuer">Issuer:</label>
      <input
        type="text"
        id="issuer"
        name="issuer"
        [(ngModel)]="formData.issuer"
        class="p-2 border rounded"
      />
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      [disabled]="creditCardForm.invalid"
      class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-full transition-colors duration-300 ease-in-out"
    >
      Submit
    </button>
  </form>
</div>
